<%- extends 'layout.ejs' %>

<% block content %>
<article class="post-page py-5" itemscope itemtype="http://schema.org/BlogPosting">
  <div class="container">
    <!-- Post Header -->
    <header class="post-header mb-5">
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <div class="text-center mb-4">
            <% if (page.categories && page.categories.length > 0) { %>
              <div class="post-categories mb-3">
                <% page.categories.forEach(category => { %>
                  <a href="<%= url_for(category.path) %>" class="tag tag--sm me-2">
                    <%= category.name %>
                  </a>
                <% }); %>
              </div>
            <% } %>
            
            <h1 class="post-title gradient-text mb-3" itemprop="name headline">
              <%= page.title || 'Êó†Ê†áÈ¢ò' %>
            </h1>
            
            <div class="post-meta text-muted">
              <time class="post-date" itemprop="datePublished" datetime="<%= page.date.toISOString() %>">
                <%= page.date.format('YYYYÂπ¥MMÊúàDDÊó•') %>
              </time>
              <% if (page.updated && !moment(page.updated).isSame(page.date)) { %>
                <span class="mx-2">‚Ä¢</span>
                <time class="post-updated" itemprop="dateModified" datetime="<%= page.updated.toISOString() %>">
                  Êõ¥Êñ∞‰∫é <%= page.updated.format('YYYYÂπ¥MMÊúàDDÊó•') %>
                </time>
              <% } %>
              <span class="mx-2">‚Ä¢</span>
              <span class="post-reading-time">
                <span data-i18n="post.readingTime" data-i18n-param-minutes="<%= Math.ceil(page.content.length / 400) || 1 %>">
                  ÈòÖËØª <%= Math.ceil(page.content.length / 400) || 1 %> ÂàÜÈíü
                </span>
              </span>
              <% if (page.wordCount) { %>
                <span class="mx-2">‚Ä¢</span>
                <span class="post-word-count">
                  <span data-i18n="post.wordCount">Â≠óÊï∞</span>: <%= page.wordCount %>
                </span>
              <% } %>
            </div>
          </div>
          
          <% if (page.cover) { %>
            <div class="post-cover mb-4">
              <img src="<%= page.cover %>" alt="<%= page.title %>" class="img-fluid rounded-4">
            </div>
          <% } %>
        </div>
      </div>
    </header>

    <!-- Post Content -->
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="post-content card card--post-content mb-5" itemprop="articleBody">
          <div class="card__body">
            <!-- Table of Contents -->
            <% if (page.toc) { %>
              <aside class="post-toc float-md-end ms-md-4 mb-4">
                <div class="card card--toc">
                  <div class="card__header">
                    <h3 class="card__title h6 mb-0">ÁõÆÂΩï</h3>
                  </div>
                  <div class="card__body">
                    <div class="post-toc-content">
                      <%= toc(page.content, { list_number: false, class: 'post-toc-list' }) %>
                    </div>
                  </div>
                </div>
              </aside>
            <% } %>
            
            <!-- Post Body -->
            <div class="post-body">
              <%- page.content %>
            </div>
          </div>
        </div>
        
        <!-- Post Footer -->
        <footer class="post-footer mb-5">
          <% if (page.tags && page.tags.length > 0) { %>
            <div class="post-tags mb-4">
              <h3 class="h6 d-inline-block me-2 mb-0" data-i18n="post.tags">Ê†áÁ≠æ:</h3>
              <% page.tags.forEach(tag => { %>
                <a href="<%= url_for(tag.path) %>" class="tag tag--sm me-2">
                  <%= tag.name %>
                </a>
              <% }); %>
            </div>
          <% } %>
          
          <div class="post-actions d-flex justify-content-between">
            <div>
              <button class="btn btn--icon me-2" aria-label="ÁÇπËµû">
                <span>üëç</span>
              </button>
              <button class="btn btn--icon me-2" aria-label="ÂàÜ‰∫´">
                <span>üì§</span>
              </button>
            </div>
            <div>
              <button class="btn btn--icon" aria-label="Êî∂Ëóè">
                <span>‚≠ê</span>
              </button>
            </div>
          </div>
        </footer>
        
        <!-- Post Navigation -->
        <nav class="post-navigation card mb-5">
          <div class="card__body">
            <div class="row g-4">
              <div class="col-md-6">
                <% if (page.prev) { %>
                  <a href="<%= url_for(page.prev.path) %>" class="post-nav-link post-nav-link--prev d-flex align-items-center h-100">
                    <span class="me-2" data-i18n="post.prevPost">‰∏ä‰∏ÄÁØá</span>
                    <span class="text-truncate"><%= page.prev.title %></span>
                  </a>
                <% } else { %>
                  <div class="post-nav-link post-nav-link--prev d-flex align-items-center h-100 text-muted">
                    <span class="me-2" data-i18n="post.prevPost">‰∏ä‰∏ÄÁØá</span>
                    <span class="text-truncate">Ê≤°Êúâ‰∫Ü</span>
                  </div>
                <% } %>
              </div>
              <div class="col-md-6">
                <% if (page.next) { %>
                  <a href="<%= url_for(page.next.path) %>" class="post-nav-link post-nav-link--next d-flex align-items-center justify-content-end h-100">
                    <span class="text-truncate text-end"><%= page.next.title %></span>
                    <span class="ms-2" data-i18n="post.nextPost">‰∏ã‰∏ÄÁØá</span>
                  </a>
                <% } else { %>
                  <div class="post-nav-link post-nav-link--next d-flex align-items-center justify-content-end h-100 text-muted">
                    <span class="text-truncate text-end">Ê≤°Êúâ‰∫Ü</span>
                    <span class="ms-2" data-i18n="post.nextPost">‰∏ã‰∏ÄÁØá</span>
                  </div>
                <% } %>
              </div>
            </div>
          </div>
        </nav>
        
        <!-- Comments Section -->
        <section class="post-comments">
          <div class="card">
            <div class="card__header">
              <h3 class="card__title mb-0" data-i18n="common.comments">ËØÑËÆ∫</h3>
            </div>
            <div class="card__body">
              <% if (theme.components.comments) { %>
                <!-- Comments system will be loaded here -->
                <div class="comments-placeholder text-center py-5">
                  <p>ËØÑËÆ∫Á≥ªÁªüÂä†ËΩΩ‰∏≠...</p>
                </div>
              <% } else { %>
                <div class="comments-disabled text-center py-5">
                  <p class="text-muted">ËØÑËÆ∫ÂäüËÉΩÂ∑≤ÂÖ≥Èó≠</p>
                </div>
              <% } %>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>
</article>
<% endblock %>